(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{7156:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return t(806)}])},7576:function(e,r,t){"use strict";var n=t(5893),a=(t(7294),t(2580));function o(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function c(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function s(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){c(e,r,t[r])}))}return e}function i(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function l(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,a,o=[],c=!0,s=!1;try{for(t=t.call(e);!(c=(n=t.next()).done)&&(o.push(n.value),!r||o.length!==r);c=!0);}catch(i){s=!0,a=i}finally{try{c||null==t.return||t.return()}finally{if(s)throw a}}return o}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return o(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return o(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}r.Z=function(e){var r=e.label,t=i(e,["label"]),o=l((0,a.U$)(t),2),c=o[0],u=o[1];return(0,n.jsxs)("div",{className:"flex flex-col my-1 text-color_black_1 w-full mb-6 h-20",children:[(0,n.jsxs)("label",{className:"text-sm",htmlFor:t.name,children:[" ",r," "]}),(0,n.jsx)("div",{className:"h-10",children:(0,n.jsx)("input",s({id:t.name,name:t.name},c,t,{className:"".concat(t.className," w-full"),style:{borderRadius:"6px",border:"".concat(u.touched&&u.error?"0.5px solid #AD0808":"0.5px solid #707070")}}))}),u.touched&&u.error?(0,n.jsx)("div",{className:"error",children:"".concat(u.error)}):(0,n.jsx)("div",{children:" "})]},t.key)}},806:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return w}});var n=t(4051),a=t.n(n),o=t(5893),c=t(7294),s=t(1664),i=t(2580),l=t(4231),u=t(7576),f=t(1163),m=t(6795),d=function(e){switch(e){case"SUPERADMINISTRADOR":return"/backoffice?rol=SUPERADMIN";case"ADMINISTRADOR":return"/backoffice?rol=ADMIN";case"ASESOR":return"/backoffice?rol=ASESOR";case"USUARIO":return"/"}},h=t(5675),b=t(4986),p=t(4108);function y(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function x(e,r,t,n,a,o,c){try{var s=e[o](c),i=s.value}catch(l){return void t(l)}s.done?r(i):Promise.resolve(i).then(n,a)}function v(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var o=e.apply(r,t);function c(e){x(o,n,a,c,s,"next",e)}function s(e){x(o,n,a,c,s,"throw",e)}c(void 0)}))}}function j(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,a,o=[],c=!0,s=!1;try{for(t=t.call(e);!(c=(n=t.next()).done)&&(o.push(n.value),!r||o.length!==r);c=!0);}catch(i){s=!0,a=i}finally{try{c||null==t.return||t.return()}finally{if(s)throw a}}return o}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return y(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return y(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var g="w-full h-12 px-4 py-2 my-1 text-base border border-color_gray_5 placeholder-color_gray_5 rounded-md",N={usuario:"",contra:""};function w(){var e=(0,f.useRouter)().push,r=(0,m.Eu)().dispatch,t=j(c.useState(""),2),n=t[0],y=t[1];function x(){return(x=v(a().mark((function t(n){var o,c,s,i,l,u,f;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,b.rK)("auth/autenticacion",{type:b.lO.auth,method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({usuario:Number(n.usuario),contra:n.contra})});case 3:return o=t.sent,t.next=6,o.json();case 6:if(c=t.sent,400===o.status&&(y("Hubo un error, ".concat(c.message)||0),r({isAuth:!1}),setTimeout((function(){y("")}),1e4)),403===o.status&&(localStorage.setItem("usuario",n.usuario),r({isAuth:!1}),y("".concat(c.message)),setTimeout((function(){e("/cambiar-contrasena")}),3e3)),201!==o.status){t.next=20;break}return s=c.access_token,i=c.data,l=c.refreshToken,localStorage.setItem("usuario",n.usuario),localStorage.setItem("access_token",s),localStorage.setItem("refresh_token",l),t.next=16,fetch("".concat("/bancopobres","/api/login"),{method:"POST",body:JSON.stringify({token:s}),headers:{"Content-Type":"application/json"}});case 16:r({rol:i.rol,isAuth:!0,status:m.Q_.resolved,usuario:Number(n.usuario)}),u=i.rol,f=d(u),e(f);case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(0),y("Hubo un error al iniciar sesi\xf3n, por favor intenta nuevamente");case 25:case"end":return t.stop()}}),t,null,[[0,22]])})))).apply(this,arguments)}return(0,o.jsx)("div",{className:"my-10",children:(0,o.jsxs)("main",{className:"max-w-5xl mx-auto min-h-full flex flex-wrap justify-center",children:[(0,o.jsx)("div",{className:"relative w-2/5 h-6/12 object-cover",children:(0,o.jsx)(h.default,{className:"object-cover",src:"".concat("/bancopobres","/login.png"),layout:"fill"})}),(0,o.jsx)("div",{className:"w-full lg:w-1/2",children:(0,o.jsxs)("div",{className:"w-4/5 mx-auto",children:[(0,o.jsx)("img",{src:"".concat("/bancopobres","/LogoBanco.svg"),alt:"banco_de_las_opotunidades",className:"mx-auto my-4"}),(0,o.jsx)("h1",{className:"text-xl text-center font-medium mb-4 titleLogin",children:"Ingrese sus datos para iniciar sesi\xf3n"}),(0,o.jsx)(i.J9,{initialValues:N,validationSchema:l.Ry({usuario:l.Z_().required("* Campo obligatorio"),contra:l.Z_().required("* Campo obligatorio").min(6,"La contrase\xf1a debe tener al menos 6 caracteres")}),onSubmit:function(e){return x.apply(this,arguments)},children:(0,o.jsxs)(i.l0,{className:"flex flex-col",children:[(0,o.jsx)(u.Z,{label:"N\xfamero de identificaci\xf3n",name:"usuario",type:"number",onWheel:p.F,className:g,placeholder:"Escribe aqu\xed el n\xfamero de tu documento"},"usuario"),(0,o.jsx)(u.Z,{label:"Digite su contrase\xf1a",type:"password",name:"contra",placeholder:"Escribe aqu\xed tu contrase\xf1a",className:g},"contra"),(0,o.jsxs)("label",{className:"flex gap-2 font-section text-sm mt-4",children:[(0,o.jsx)("input",{className:"w-4 h-4 mr-1 mb-1 mt-1 inline-block text-center",type:"checkbox"}),(0,o.jsx)("span",{className:"inline-block font-medium text-left",children:"Recu\xe9rdame"})]}),""!==n&&(0,o.jsxs)("div",{className:n.includes("error")?"mensaje-error mb-4 px-4 py-3 rounded relative":"mensaje-exito mb-4 px-4 py-3 rounded relative",children:[n," "]}),(0,o.jsxs)("div",{className:"flex justify-between mt-10 mb-5 text-sm",children:[(0,o.jsx)(s.default,{href:"/crear-cuenta",children:(0,o.jsx)("a",{className:"flex items-center font-medium text-color_primary_2_ligth text-center rounded-full border-2 border-color_primary_2_ligth px-9 buttonAccesLink",children:"Registrarse"})}),(0,o.jsx)("button",{type:"submit",className:"font-medium bg-color_primary_2_ligth text-center rounded-full text-white px-12 py-3 buttonAccesLogin",children:"Ingresar"})]}),(0,o.jsx)("hr",{}),(0,o.jsxs)("div",{className:"flex items-center mt-5 justify-center recoverPassword",children:[(0,o.jsx)("p",{className:"text-gray-400 mr-2",children:"\xbfOlvid\xf3 su contrase\xf1a?"}),(0,o.jsx)(s.default,{href:"/recuperar",children:(0,o.jsx)("a",{className:"text-color_primary_2_ligth",children:"Recup\xe9rala AQU\xcd"})})]})]})})]})})]})})}},4108:function(e,r,t){"use strict";function n(e){e.target.blur()}t.d(r,{F:function(){return n}})}},function(e){e.O(0,[551,774,888,179],(function(){return r=7156,e(e.s=r);var r}));var r=e.O();_N_E=r}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[770],{7104:function(e,o,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/backoffice/[cedula]/[historial]",function(){return n(8274)}])},8274:function(e,o,n){"use strict";n.r(o),n.d(o,{__N_SSP:function(){return y},default:function(){return w}});var r=n(4051),t=n.n(r),a=n(5893),i=n(1163),l=n(7294);var s=function(e){var o=e.children;return(0,a.jsx)("div",{className:"table-responsive",children:(0,a.jsxs)("table",{className:"mx-auto bg-white rounded-lg w-full",children:[(0,a.jsx)("thead",{className:"border-b font-bold text-xs",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-4 text-center",children:"C.C"}),(0,a.jsx)("th",{className:"p-4 text-center",children:"Nombres"}),(0,a.jsx)("th",{className:"p-4 text-center",children:"Apellidos"}),(0,a.jsx)("th",{className:"p-4 text-center",children:"Rol"}),(0,a.jsx)("th",{className:"p-4 text-center",children:"Tipo de cr\xe9dito"}),(0,a.jsx)("th",{className:"p-4 text-center",children:"Fecha"}),(0,a.jsx)("th",{className:"p-4 text-center",children:"Estado"})]})}),o]})})};n(3217);var d=function(e){var o=function(e,o){return(0,a.jsx)("div",{className:"text-xs font-semibold px-4 rounded-full py-2 ".concat(o),children:e})};return(0,a.jsx)(l.Fragment,{children:(0,a.jsxs)("div",{className:"flex justify-center",children:[(0,a.jsxs)("div",{className:"mr-4",children:[" ",e.estado.actual?(0,a.jsx)("span",{children:"\ud83d\udfe2"}):(0,a.jsx)("span",{children:"\u274c"})]}),"completado"===e.estado.estado.toLowerCase()&&o("Completado","estado-verde-full"),"incompleto"===e.estado.estado.toLowerCase()&&o("incompleto","estado-amarillo"),"falta_documentos"===e.estado.estado.toLowerCase()&&o("Faltan documentos","estado-rojo"),"por_validar"===e.estado.estado.toLowerCase()&&o("Por validar","estado-amarillo"),"preparado_envio"===e.estado.estado.toLowerCase()&&o("Listo para enviar al operador","color_primary_1"),"rechazado"===e.estado.estado.toLowerCase()&&o("Rechazado","estado-rojo-full"),"aprobado"===e.estado.estado.toLowerCase()&&o("aprobado","color_primary_1"),"colocado"===e.estado.estado.toLowerCase()&&o("colocado","color_primary_1")]})})},c={month:"short",day:"numeric",year:"numeric"};var u=function(e){return(0,a.jsx)("tbody",{className:"last:border-b-0 text-sm",children:(0,a.jsxs)("tr",{className:"border-b font-section",children:[(0,a.jsx)("td",{className:"text-center p-4",children:e.cedula}),(0,a.jsx)("td",{className:"text-center p-4",children:e.nombres}),(0,a.jsx)("td",{className:"text-center p-4",children:e.apellidos}),(0,a.jsx)("td",{className:"text-center p-4",children:e.rol}),(0,a.jsx)("td",{className:"text-center p-4",children:e.credito}),(0,a.jsx)("td",{className:"text-center p-4",children:(o=e.fecha,new Date(o).toLocaleDateString("es",c))}),(0,a.jsxs)("td",{className:"text-center p-4",children:[(0,a.jsx)(d,{estado:e.estado_solicitud})," "]})]})});var o},v=(n(8198),n(779)),m=n(6960),p=n(6135),f=n(1319);function h(e,o){(null==o||o>e.length)&&(o=e.length);for(var n=0,r=new Array(o);n<o;n++)r[n]=e[n];return r}function x(e,o,n,r,t,a,i){try{var l=e[a](i),s=l.value}catch(d){return void n(d)}l.done?o(s):Promise.resolve(s).then(r,t)}function b(e){return function(){var o=this,n=arguments;return new Promise((function(r,t){var a=e.apply(o,n);function i(e){x(a,r,t,i,l,"next",e)}function l(e){x(a,r,t,i,l,"throw",e)}i(void 0)}))}}function j(e,o,n){return o in e?Object.defineProperty(e,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[o]=n,e}function _(e){for(var o=1;o<arguments.length;o++){var n=null!=arguments[o]?arguments[o]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(o){j(e,o,n[o])}))}return e}function N(e,o){return function(e){if(Array.isArray(e))return e}(e)||function(e,o){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,t,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!o||a.length!==o);i=!0);}catch(s){l=!0,t=s}finally{try{i||null==n.return||n.return()}finally{if(l)throw t}}return a}}(e,o)||function(e,o){if(!e)return;if("string"===typeof e)return h(e,o);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,o)}(e,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var y=!0,w=function(e){var o,n=e.sid,r=e.cedula,d=N(l.useState(!0),2),c=d[0],h=d[1],x=N(l.useState(null),2),j=x[0],y=x[1],w=N(l.useState([]),2),g=w[0],C=w[1],S=N(l.useState({nombres:"",apellidos:"",rol:"",credito:""}),2),O=S[0],L=S[1],P=(0,i.useRouter)().push;return l.useEffect((function(){function e(){return(e=b(t().mark((function e(){var o,a,i,l,s,d,c,u,v,p,f,x,b,j,N,w,g,S,O,P,E,k,A,F,T,z,D,I,R,H,X,Z,M,U,Y,$,q,B,G,J,K;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),o="".concat("https://www.medellin.gov.co/bancopobres/solicitudescreditosms/","credito/solicitud/usuario/").concat(r),e.next=4,(0,m.Y)(o);case 4:return a=e.sent.response,e.next=7,a.json();case 7:i=e.sent,401===a.status&&(h(!1),y("Hubo un error al consultar la informaci\xf3n del cr\xe9dito, por favor intenta nuevamente")),404===a.status&&(y(null),h(!1)),200===a.status&&(i.length?(q=i.filter((function(e){return e.id===n})),B=(null===(l=q[0])||void 0===l||null===(s=l.codeudor)||void 0===s?void 0:s.persona.num_identificacion)===Number(r)?"".concat(null===(d=q[0])||void 0===d||null===(c=d.codeudor)||void 0===c?void 0:c.persona.primer_nombre," ").concat((null===(u=q[0])||void 0===u||null===(v=u.codeudor)||void 0===v?void 0:v.persona.segundo_nombre)||""):(null===(p=q[0])||void 0===p||null===(f=p.deudor)||void 0===f?void 0:f.persona.num_identificacion)===Number(r)?"".concat(null===(x=q[0])||void 0===x||null===(b=x.deudor)||void 0===b?void 0:b.persona.primer_nombre," ").concat((null===(j=q[0])||void 0===j||null===(N=j.deudor)||void 0===N?void 0:N.persona.segundo_nombre)||""):"",G=(null===(w=q[0])||void 0===w||null===(g=w.codeudor)||void 0===g?void 0:g.persona.num_identificacion)===Number(r)?"".concat(null===(S=q[0])||void 0===S||null===(O=S.codeudor)||void 0===O?void 0:O.persona.primer_apellido," ").concat((null===(P=q[0])||void 0===P||null===(E=P.codeudor)||void 0===E?void 0:E.persona.segundo_apellido)||""):(null===(k=q[0])||void 0===k||null===(A=k.deudor)||void 0===A?void 0:A.persona.num_identificacion)===Number(r)?"".concat(null===(F=q[0])||void 0===F||null===(T=F.deudor)||void 0===T?void 0:T.persona.primer_apellido," ").concat((null===(z=q[0])||void 0===z||null===(D=z.deudor)||void 0===D?void 0:D.persona.segundo_apellido)||""):"",J=(null===(I=q[0])||void 0===I||null===(R=I.codeudor)||void 0===R?void 0:R.persona.num_identificacion)===Number(r)?"".concat(null===(H=q[0])||void 0===H||null===(X=H.codeudor)||void 0===X?void 0:X.tipo):(null===(Z=q[0])||void 0===Z||null===(M=Z.deudor)||void 0===M?void 0:M.persona.num_identificacion)===Number(r)?"".concat(null===(U=q[0])||void 0===U||null===(Y=U.deudor)||void 0===Y?void 0:Y.tipo):"",K=null===($=q[0])||void 0===$?void 0:$.tipo,L((function(e){return _({},e,{nombres:B,apellidos:G,rol:J,credito:K})})),C(q)):C([]),h(!1),y(null));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[r,P,n]),(0,a.jsx)(v.Z,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)(f.Z,{children:"Historial"}),c?(0,a.jsxs)("div",{className:"flex flex-nowrap flex-row items-center",children:[(0,a.jsx)("div",{className:"h-16 flex items-center",children:"Cargando ..."}),(0,a.jsx)("div",{className:"spinner_cont items-center",children:(0,a.jsx)("span",{className:"material spinner"})})]}):j?(0,a.jsx)(p.default,{message:j}):(0,a.jsx)(l.Fragment,{children:g.length>0?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"card-custom",children:(0,a.jsx)(s,{children:null===(o=g[0])||void 0===o?void 0:o.estado_solicitud.map((function(e,o){return(0,a.jsx)(u,{cedula:r,nombres:null===O||void 0===O?void 0:O.nombres,apellidos:null===O||void 0===O?void 0:O.apellidos,rol:null===O||void 0===O?void 0:O.rol,credito:null===O||void 0===O?void 0:O.credito,fecha:e.fecha_actualizacion,estado_solicitud:e},o)})).reverse()})})}):(0,a.jsx)("div",{className:"mensaje-error",children:"No hay historial para mostrar, intenta m\xe1s tarde"})})]})})}}},function(e){e.O(0,[774,888,179],(function(){return o=7104,e(e.s=o);var o}));var o=e.O();_N_E=o}]);
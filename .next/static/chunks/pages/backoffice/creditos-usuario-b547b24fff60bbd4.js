(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[522],{9429:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/backoffice/creditos-usuario",function(){return t(7148)}])},7148:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return k}});var n=t(4051),a=t.n(n),s=t(5893),o=t(7294),c=t(6795),i=t(2714),l=t(1664),u={month:"short",day:"numeric",year:"numeric"},d=function(e){return(0,s.jsx)("tbody",{className:"last:border text-sm",children:(0,s.jsxs)("tr",{className:"font-section",children:[(0,s.jsx)("td",{className:"text-center p-4",children:e.cedula}),(0,s.jsx)("td",{className:"text-center p-4",children:(r=e.fechaDesembolso,new Date(r).toLocaleDateString("es",u))}),(0,s.jsx)("td",{className:"text-center p-4",children:e.MontoDesembolso}),(0,s.jsx)("td",{className:"text-center p-4",children:e.NumeroCuotas}),(0,s.jsx)("td",{className:"text-center p-4",children:e.CuotasPendientes}),(0,s.jsx)("td",{className:"text-center p-4",children:e.CuotaAnterior}),(0,s.jsx)(l.default,{href:"/backoffice/creditos-usuario/".concat(e.cedula),children:(0,s.jsx)("a",{children:(0,s.jsxs)("td",{className:"text-center p-4",children:[(0,s.jsx)("div",{className:"btn-texto items-center justify-center",children:"Ver m\xe1s"})," "]})})})]})});var r},m=t(4986);function f(e,r,t,n,a,s,o){try{var c=e[s](o),i=c.value}catch(l){return void t(l)}c.done?r(i):Promise.resolve(i).then(n,a)}function h(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function x(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){h(e,r,t[r])}))}return e}var b=function(e){var r=e.solicitudesActivas,t=e.setSolicitudesActivas,n=e.firstCallSol,c={userId:"",data:[],loading:!1,error:""},i=o.useRef(),l=function(){var e,s=(e=a().mark((function e(s){var o,l,u,d,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.preventDefault(),t(x({},r,{loading:!0})),""!==r.userId){e.next=5;break}return t(x({},c,{data:n})),e.abrupt("return");case 5:if(Number(r.userId)){e.next=9;break}return t(x({},c,{data:n,error:"Hubo un error, debes ingresar un documento"})),setTimeout((function(){t(x({},c,{data:n}))}),5e3),e.abrupt("return");case 9:return e.prev=9,o="creditos?estado=Activo&limite=".concat(30,"&indice=",0,"&usuario=").concat(r.userId),e.next=13,(0,m.rK)(o,{type:m.lO.report});case 13:if(200!==(l=e.sent).status){e.next=22;break}return e.next=17,l.json();case 17:u=e.sent,d=u.sort((function(e,r){return new Date(r.fecha_desembolso)-new Date(e.fecha_desembolso)})),t(x({},c,{userId:i.current.value,data:d,loading:!1})),e.next=23;break;case 22:t(x({},c,{userId:i.current.value,data:[],loading:!1,error:"Hubo un error, no se encontraron resultados."})),setTimeout((function(){t(x({},c,{data:n,loading:!1,error:""}))}),5e3);case 23:e.next=30;break;case 25:e.prev=25,e.t0=e.catch(9),t(x({},c,{userId:null===i||void 0===i||null===(f=i.current)||void 0===f?void 0:f.value,data:[],loading:!1,error:"Hubo un error, intenta m\xe1s tarde."})),setTimeout((function(){t(x({},c,{data:n,loading:!1,error:""}))}),5e3);case 30:case"end":return e.stop()}}),e,null,[[9,25]])})),function(){var r=this,t=arguments;return new Promise((function(n,a){var s=e.apply(r,t);function o(e){f(s,n,a,o,c,"next",e)}function c(e){f(s,n,a,o,c,"throw",e)}o(void 0)}))});return function(e){return s.apply(this,arguments)}}();return(0,s.jsxs)("div",{className:"card-custom mb-4",children:[(0,s.jsx)("div",{className:"header-card-custom",children:(0,s.jsx)("span",{children:"Buscar"})}),(0,s.jsx)("div",{className:"body-card-custom",children:(0,s.jsx)("div",{className:"w-full my-1 items-center flex flex-col md:flex-row",children:(0,s.jsxs)("div",{className:"w-full mb-2",children:[(0,s.jsx)("label",{For:"userId",children:"Buscar por c\xe9dula"}),(0,s.jsx)("div",{className:"flex relative items-center",children:(0,s.jsx)("input",{ref:i,type:"text",className:"w-full border rounded-full px-4 py-2 text-center",placeholder:"No. de cedula",name:"userId",value:r.userId,onChange:function(e){var n=e.target;t(x({},r,h({},n.name,n.value)))},onKeyDown:function(e){return function(e){13===e.keyCode&&l(e)}(e)}})})]})})}),(0,s.jsx)("div",{className:"footer-card-custom",children:(0,s.jsx)("div",{className:"w-full",children:(0,s.jsxs)("div",{className:"flex flex-row justify-end mb-8 md:mb-0",children:[(0,s.jsx)("button",{type:"submit",onClick:function(){t(x({},c,{data:n,loading:!1,error:""}))},className:"btn-texto ml-2",children:"Limpiar"}),(0,s.jsx)("button",{className:"btn-primario ml-2",type:"submit",onClick:l,children:"Buscar"})]})})})]})},p=function(e){var r=e.children;return(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"table-responsive",children:(0,s.jsxs)("table",{className:"mx-auto bg-white rounded-lg w-full",children:[(0,s.jsx)("thead",{className:"border-b font-bold text-xs",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"p-4 text-center",children:"C\xe9dula"}),(0,s.jsx)("th",{className:"p-4 text-center",children:"Fecha de desembolso"}),(0,s.jsx)("th",{className:"p-4 text-center",children:"Monto de desembolso"}),(0,s.jsx)("th",{className:"p-4 text-center",children:"Numero de cuotas"}),(0,s.jsx)("th",{className:"p-4 text-center",children:"Cuotas pendientes"}),(0,s.jsx)("th",{className:"p-4 text-center",children:"Cuota anterior"}),(0,s.jsx)("th",{className:"p-4 text-center",children:"Dashboard"})]})}),r]})})})},v=t(840),j=t(9730),N=(t(8198),t(1319));function y(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function g(e,r,t,n,a,s,o){try{var c=e[s](o),i=c.value}catch(l){return void t(l)}c.done?r(i):Promise.resolve(i).then(n,a)}function w(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var s=e.apply(r,t);function o(e){g(s,n,a,o,c,"next",e)}function c(e){g(s,n,a,o,c,"throw",e)}o(void 0)}))}}function _(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function C(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){_(e,r,t[r])}))}return e}function O(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,a,s=[],o=!0,c=!1;try{for(t=t.call(e);!(o=(n=t.next()).done)&&(s.push(n.value),!r||s.length!==r);o=!0);}catch(i){c=!0,a=i}finally{try{o||null==t.return||t.return()}finally{if(c)throw a}}return s}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return y(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return y(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var k=function(){var e,r=(0,c.Eu)().rol,t=O(o.useState(!0),2),n=t[0],l=t[1],u=O(o.useState([]),2),f=u[0],h=u[1],x=O(o.useState({userId:"",data:[],loading:!1,error:""}),2),y=x[0],g=x[1],_=O(o.useState({numberRegister:10,numberPage:0}),2),k=_[0],P=_[1],S=k.numberRegister,D=k.numberPage,I=O(o.useState(""),2),A=I[0],E=I[1];return o.useEffect((function(){l(!0),l(!1)}),[r]),o.useEffect((function(){function e(){return(e=w(a().mark((function e(){var r,t,n,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(C({},y,{data:[],loading:!0})),e.prev=1,r="creditos?estado=Activo&limite=".concat(Number(S),"&indice=").concat(Number(D)),e.next=5,(0,m.rK)(r,{type:m.lO.report});case 5:if(200!==(t=e.sent).status){e.next=14;break}return e.next=9,t.json();case 9:n=e.sent,s=n.sort((function(e,r){return new Date(r.fecha_desembolso)-new Date(e.fecha_desembolso)})),h(s),E(""),g(C({},y,{data:s,loading:!1,error:""}));case 14:404===t.status&&(g(C({},y,{data:[],loading:!1,error:"Hubo un error, no se encontraron resultados"})),E("No se encontraron m\xe1s resultados")),400===t.status&&(E(""),g(C({},y,{data:[],loading:!1,error:" Hubo un error, no se encontraron resultados rrrr"}))),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(1),g(C({},y,{data:[],loading:!1,error:"No se encontraron m\xe1s resultados - error"})),E("No se encontraron m\xe1s resultados");case 22:case"end":return e.stop()}}),e,null,[[1,18]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[r,S,D]),n?(0,s.jsxs)("div",{className:"flex flex-nowrap flex-row items-center",children:[(0,s.jsx)("div",{className:"h-16 flex items-center",children:"Cargando ..."}),(0,s.jsx)("div",{className:"spinner_cont items-center",children:(0,s.jsx)("span",{className:"material spinner"})})]}):(e=r,(0,s.jsx)(v.i,{children:(0,s.jsxs)(j.Z,{rolUser:e,children:[(0,s.jsx)(N.Z,{children:"Cr\xe9ditos usuario"}),(0,s.jsx)(b,{solicitudesActivas:y,setSolicitudesActivas:g,firstCallSol:f,numberRegister:S,numberPage:D}),""!==y.error?(0,s.jsx)("div",{className:y.error.includes("error")&&"mensaje-error mb-4 px-4 py-3 rounded relative",children:y.error}):null,y.loading?(0,s.jsxs)("div",{className:"flex flex-nowrap flex-row items-center",children:[(0,s.jsx)("div",{className:"h-16 flex items-center",children:"Cargando ..."}),(0,s.jsx)("div",{className:"spinner_cont items-center",children:(0,s.jsx)("span",{className:"material spinner"})})]}):y.data.length>0?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"card-custom",children:[(0,s.jsx)("div",{className:"header-card-custom",children:"Lista de cr\xe9ditos usuario"}),(0,s.jsx)("div",{className:"body-card-custom",children:(0,s.jsx)(p,{children:y.data.map((function(e,r){var t=e.cedula,n=e.fecha_desembolso,a=e.monto_desembolsado,c=e.numero_cuotas,i=e.cuotas_pendientes,l=e.cuota_anterior;return(0,s.jsx)(o.Fragment,{children:(0,s.jsx)(d,{cedula:t,fechaDesembolso:n,MontoDesembolso:a,NumeroCuotas:c,CuotasPendientes:i,CuotaAnterior:l})},r)}))})}),(0,s.jsx)("div",{className:"footer-card-custom",children:""!==y.userId?null:(0,s.jsx)(i.n,{configFilter:k,setConfigFilter:P,NotFoundResult:A})})]})}):"No hay datos para mostrar, intente m\xe1s tarde"]})}))}}},function(e){e.O(0,[774,888,179],(function(){return r=9429,e(e.s=r);var r}));var r=e.O();_N_E=r}]);
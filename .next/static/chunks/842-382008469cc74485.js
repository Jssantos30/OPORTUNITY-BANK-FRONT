"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[842],{9842:function(e,n,o){o.r(n),o.d(n,{default:function(){return j}});var r=o(4051),i=o.n(r),t=o(5893),a=o(7294),l=o(6795),s=o(840),u=o(4108),d=function(e){var n={},o=!0,r=!1,i=void 0;try{for(var t,a=Object.keys(e)[Symbol.iterator]();!(o=(t=a.next()).done);o=!0){var l=t.value;e[l]||(n[l]="Requerido")}}catch(s){r=!0,i=s}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n};function m(e,n){(null==n||n>e.length)&&(n=e.length);for(var o=0,r=new Array(n);o<n;o++)r[o]=e[o];return r}function c(e,n,o){return n in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e}function v(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{},r=Object.keys(o);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(o).filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})))),r.forEach((function(n){c(e,n,o[n])}))}return e}function f(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var o=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var r,i,t=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(t.push(r.value),!n||t.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==o.return||o.return()}finally{if(l)throw i}}return t}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return m(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(o);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return m(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var b=function(e){var n,o,r,i,s,m,b,_,h,x,p,y,j,g,N,C,A=(0,l.Eu)().setOpenModal,M=f(a.useState(""),2),w=(M[0],M[1],f(a.useState({}),2)),S=w[0],L=w[1],k=f(a.useState(!1),2),O=k[0],E=k[1],V=f(a.useState(!0),2),F=V[0],P=V[1],R=f(a.useState(!0),2),I=R[0],T=R[1],W=f(a.useState(!1),2),B=W[0],D=W[1],G=function(n){var o=n.target;"num_salarios_minimo"===o.name&&e.setValueMontoMinimo(o.value),"num_salarios"===o.name&&e.setValueMontoMaximo(o.value),e.setValuesAddLineaCredito(v({},e.valuesAddLineaCredito,c({},o.name,o.value)))},H={linea_credito:a.useRef(null),num_cuotas:a.useRef(null),num_salarios_minimo:a.useRef(null),num_salarios:a.useRef(null),monto_minimo:a.useRef((null===H||void 0===H||null===(n=H.num_salarios_minimo)||void 0===n||null===(o=n.current)||void 0===o?void 0:o.value)*e.salarioMinimo||0),monto_total:a.useRef((null===H||void 0===H||null===(r=H.num_salarios)||void 0===r||null===(i=r.current)||void 0===i?void 0:i.value)*e.salarioMinimo||0)};a.useEffect((function(){var n,o;e.setValuesAddLineaCredito(v({},e.valuesAddLineaCredito,{monto_minimo:(null===H||void 0===H||null===(n=H.num_salarios_minimo)||void 0===n||null===(o=n.current)||void 0===o?void 0:o.value)*e.salarioMinimo||0}))}),[null===H||void 0===H||null===(s=H.num_salarios_minimo)||void 0===s||null===(m=s.current)||void 0===m?void 0:m.value]),a.useEffect((function(){var n,o;e.setValuesAddLineaCredito(v({},e.valuesAddLineaCredito,{monto_total:(null===H||void 0===H||null===(n=H.num_salarios)||void 0===n||null===(o=n.current)||void 0===o?void 0:o.value)*e.salarioMinimo||0}))}),[null===H||void 0===H||null===(b=H.num_salarios)||void 0===b||null===(_=b.current)||void 0===_?void 0:_.value]);var U=function(n){n.preventDefault();var o=d(e.valuesAddLineaCredito);L(o);var r=Object.keys(o).length,i=Object.keys(o);if(r){var t=!0,a=!1,l=void 0;try{for(var s,u=i[Symbol.iterator]();!(t=(s=u.next()).done);t=!0){var m=s.value;H[m].current.focus({preventScroll:!1})}}catch(c){a=!0,l=c}finally{try{t||null==u.return||u.return()}finally{if(a)throw l}}}else A(!0)};return(0,t.jsxs)("form",{onSubmit:U,children:[(0,t.jsx)("div",{className:"body-card-custom",children:(0,t.jsxs)("div",{onSubmit:U,className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{className:"grid",children:[(0,t.jsx)("label",{className:"font-bold",children:"Nombre de l\xednea de cr\xe9dito:"}),(0,t.jsx)("input",{type:"text",name:"linea_credito",value:e.valuesAddLineaCredito.linea_credito,onChange:G,ref:H.linea_credito,className:"h-10 border border-gray-400 px-4 rounded-lg"}),S.linea_credito?(0,t.jsx)("div",{className:"texto-error",children:S.linea_credito}):null]}),(0,t.jsxs)("div",{className:"grid",children:[(0,t.jsx)("label",{className:"font-bold",children:"N\xfamero de cuotas permitidas:"}),(0,t.jsx)("input",{type:"number",onWheel:u.F,min:1,name:"num_cuotas",value:e.valuesAddLineaCredito.num_cuotas,onChange:G,ref:H.num_cuotas,className:"h-10 border border-gray-400 px-4 rounded-lg"}),S.num_cuotas?(0,t.jsx)("div",{className:"texto-error",children:S.num_cuotas}):null]}),(0,t.jsxs)("div",{className:"grid",children:[(0,t.jsx)("label",{className:"font-bold",children:"Numero de salarios - monto m\xednimo:"}),(0,t.jsx)("input",{type:"number",onWheel:u.F,name:"num_salarios_minimo",disabled:O,value:O?"":e.valuesAddLineaCredito.num_salarios_minimo,onChange:G,ref:H.num_salarios_minimo,className:"h-10 border border-gray-400 px-4 rounded-lg"}),S.num_salarios_minimo?(0,t.jsx)("div",{className:"texto-error",children:S.num_salarios_minimo}):null]}),(0,t.jsxs)("div",{className:"grid",children:[(0,t.jsx)("label",{children:"Monto m\xednimo:"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,t.jsx)("input",{type:"number",onWheel:u.F,name:"monto_minimo",ref:H.monto_minimo,disabled:F,value:F&&!(null===H||void 0===H||null===(h=H.num_salarios_minimo)||void 0===h||null===(x=h.current)||void 0===x?void 0:x.value)?(null===H||void 0===H||null===(p=H.num_salarios_minimo)||void 0===p||null===(y=p.current)||void 0===y?void 0:y.value)*e.salarioMinimo||0:e.valuesAddLineaCredito.monto_minimo,onChange:G,className:"grid col-span-2"}),F?(0,t.jsx)("div",{className:"grid col-span-1",children:(0,t.jsx)("button",{className:"btn-secundario",type:"button",onClick:function(){E(!0),P(!1)},children:(0,t.jsx)("span",{children:"Editar"})})}):(0,t.jsx)("div",{className:"grid col-span-1",children:(0,t.jsx)("button",{className:"btn-primario",type:"button",onClick:function(){P(!0);var n=(e.valuesAddLineaCredito.monto_minimo/e.salarioMinimo).toFixed(1);e.setValuesAddLineaCredito(v({},e.valuesAddLineaCredito,{num_salarios_minimo:n})),H.num_salarios_minimo.current.value=n,E(!1)},children:"Guardar"})}),S.monto_minimo?(0,t.jsx)("div",{className:"texto-error",children:S.monto_minimo}):null]})]}),(0,t.jsxs)("div",{className:"grid",children:[(0,t.jsx)("label",{className:"font-bold",children:"N\xfamero de salarios - monto m\xe1ximo:"}),(0,t.jsx)("input",{type:"number",onWheel:u.F,name:"num_salarios",disabled:B,value:B?"":e.valuesAddLineaCredito.num_salarios,onChange:G,ref:H.num_salarios,className:"h-10 border border-gray-400 px-4 rounded-lg"}),S.num_salarios?(0,t.jsx)("div",{className:"texto-error",children:S.num_salarios}):null]}),(0,t.jsxs)("div",{className:"grid",children:[(0,t.jsx)("label",{children:"Monto M\xe1ximo:"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,t.jsx)("input",{type:"number",onWheel:u.F,name:"monto_total",ref:H.monto_total,disabled:I,value:I&&!(null===H||void 0===H||null===(j=H.num_salarios)||void 0===j||null===(g=j.current)||void 0===g?void 0:g.value)?(null===H||void 0===H||null===(N=H.num_salarios)||void 0===N||null===(C=N.current)||void 0===C?void 0:C.value)*e.salarioMinimo||0:e.valuesAddLineaCredito.monto_total,onChange:G,className:"grid col-span-2"}),I?(0,t.jsx)("div",{className:"grid col-span-1",children:(0,t.jsx)("button",{className:"btn-secundario",type:"button",onClick:function(){D(!0),T(!1)},children:(0,t.jsx)("span",{children:"Editar"})})}):(0,t.jsx)("div",{className:"grid col-span-1",children:(0,t.jsx)("button",{className:"btn-primario",type:"button",onClick:function(){T(!0);var n=(e.valuesAddLineaCredito.monto_total/e.salarioMinimo).toFixed(1);e.setValuesAddLineaCredito(v({},e.valuesAddLineaCredito,{num_salarios:n})),H.num_salarios.current.value=n,D(!1)},children:"Guardar"})}),S.monto_total?(0,t.jsx)("div",{className:"texto-error block",children:S.monto_total}):null]})]})]})}),(0,t.jsxs)("div",{className:"flex justify-end md:items-end footer-card-custom",children:[(0,t.jsx)("button",{type:"submit",className:"btn-primario order-1 md:order-1",children:"Enviar"}),(0,t.jsx)("button",{onClick:function(n){n.preventDefault(),e.setValuesAddLineaCredito({linea_credito:"",num_cuotas:"",num_salarios:"",monto_total:"",num_salarios_minimo:"",monto_minimo:""}),e.setValueMontoMinimo(""),e.setValueMontoMaximo(""),e.setShowCreditLineBox(!1)},type:"submit",className:"btn-texto-gris order-0 md:order-0",children:"Cancelar"})]})]})},_=o(7420),h=o(843);function x(e,n){(null==n||n>e.length)&&(n=e.length);for(var o=0,r=new Array(n);o<n;o++)r[o]=e[o];return r}function p(e,n,o,r,i,t,a){try{var l=e[t](a),s=l.value}catch(u){return void o(u)}l.done?n(s):Promise.resolve(s).then(r,i)}function y(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var o=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var r,i,t=[],a=!0,l=!1;try{for(o=o.call(e);!(a=(r=o.next()).done)&&(t.push(r.value),!n||t.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==o.return||o.return()}finally{if(l)throw i}}return t}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return x(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(o);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return x(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var j=function(e){var n={linea_credito:"",num_cuotas:"",num_salarios_minimo:"",num_salarios:"",monto_minimo:"",monto_total:""},o=(0,l.Eu)(),r=o.openModal,u=o.setOpenModal,d=y(a.useState(!1),2),m=d[0],c=d[1],v=y(a.useState(n),2),f=v[0],x=v[1],j=y(a.useState(""),2),g=j[0],N=j[1],C=y(a.useState(""),2),A=C[0],M=C[1],w=y(a.useState(""),2),S=w[0],L=w[1],k=function(){var e,o=(e=i().mark((function e(){var o,r,t,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!1),N("Procesando..."),o="".concat("https://www.medellin.gov.co/bancopobres/configuracionms/","config/credito/portafolio"),r={nombre:f.linea_credito,num_cuotas:Number(f.num_cuotas)},f.num_salarios_minimo===Number(A)?(r.num_salarios_minimo=Number(f.num_salarios_minimo),r.monto_minimo=null):(r.num_salarios_minimo=null,r.monto_minimo=Number(f.monto_minimo)),f.num_salarios===Number(S)?(r.num_salarios=Number(f.num_salarios),r.monto_total=null):(r.num_salarios=null,r.monto_total=Number(f.monto_total)),e.prev=6,e.next=9,(0,h.r)(o,r);case 9:t=e.sent,a=t.res,t.responseComplete?(u(!1),c(!1),x(n),N(a.message),setTimeout((function(){N("")}),5e3)):(u(!1),N("Hubo un error, ".concat(a.message)),setTimeout((function(){N("")}),5e3)),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(6),u(!1),N("Hubo un error, ".concat(e.t0.message)),setTimeout((function(){N("")}),5e3);case 20:case"end":return e.stop()}}),e,null,[[6,15]])})),function(){var n=this,o=arguments;return new Promise((function(r,i){var t=e.apply(n,o);function a(e){p(t,r,i,a,l,"next",e)}function l(e){p(t,r,i,a,l,"throw",e)}a(void 0)}))});return function(){return o.apply(this,arguments)}}();return(0,t.jsx)(s.i,{children:(0,t.jsxs)("div",{className:"my-8 w-full",children:[(0,t.jsxs)("section",{className:"relative",children:[(0,t.jsx)("div",{className:"flex justify-center w-11/12 mx-auto mb-4",children:(0,t.jsxs)("button",{type:"submit",onClick:function(){c(!0)},className:"mx-auto",children:[(0,t.jsx)("img",{src:"".concat("/bancopobres","/agregar-icono.svg"),className:"mx-auto"}),"Agregar L\xednea de cr\xe9dito"]})}),m?(0,t.jsx)(b,{valuesAddLineaCredito:f,setValuesAddLineaCredito:x,showCreditLineBox:m,setShowCreditLineBox:c,salarioMinimo:e.salarioMinimo,valueMontoMinimo:A,setValueMontoMinimo:M,valueMontoMaximo:S,setValueMontoMaximo:L}):null,""!==g?(0,t.jsx)("div",{className:g.includes("error")?"mensaje-error mb-4 px-4 py-3 rounded relative":"mensaje-exito mb-4 px-4 py-3 rounded relative",children:g}):null,r?(0,t.jsx)(_.Z,{nodo:"create-credit",className:"flex items-center",children:(0,t.jsxs)("div",{className:"border rounded-lg p-4 flex flex-col bg-white ",children:[(0,t.jsx)("h1",{children:"Est\xe1s seguro de crear una l\xednea de cr\xe9dito"}),(0,t.jsxs)("div",{className:"flex justify-center",children:[(0,t.jsx)("button",{type:"submit",className:"mr-4 mt-6 p-2 w-2/5 font-bold text-white rounded-full bg-color_primary_2_ligth",onClick:k,children:"Si"}),(0,t.jsx)("button",{type:"submit",className:"mt-6 p-2 w-2/5 font-bold text-white rounded-full bg-red-500",onClick:function(){M(""),L(""),u(!1)},children:"No"})]})]})}):null,(0,t.jsx)("div",{id:"create-credit",className:r&&"fixed inset-5 backdrop-blur-sm  flex items-center justify-center",children:" "})]}),(0,t.jsx)("section",{})]})})}},4108:function(e,n,o){function r(e){e.target.blur()}o.d(n,{F:function(){return r}})}}]);